/*
 * @Description: None
 * @Author: LILYGO_L
 * @Date: 2024-12-18 17:17:22
 * @LastEditTime: 2026-01-23 17:23:45
 * @License: GPL 3.0
 */

#pragma once

#include "../chip_guide.h"

namespace Cpp_Bus_Driver
{
    class Hi8561 : public Mipi_Guide
    {
    private:
        static constexpr const uint8_t _init_list[] =
            {
                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xDF, 3,
                0x90, 0x69, 0xF9,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_D8), 0xDE, 0x00,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xBB, 7,
                0x0F, 0x10, 0x43, 0x50, 0x32, 0x44, 0x44,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xBF, 2,
                0x46, 0x32,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xC0, 4,
                0x01, 0xAD, 0x01, 0xAD,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xBD, 2,
                0x00, 0xB4,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xC6, 23,
                0x00, 0x7D, 0x00, 0xC8, 0x00, 0x17, 0x1A, 0x82, 0x00, 0x00,
                0x00, 0x01, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
                0x00, 0x00, 0x01,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xC8, 3,
                0x23, 0x48, 0x87,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_D8), 0xCC, 0x31, // 2lane

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xBC, 3,
                0x2E, 0x80, 0x84,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xC3, 25,
                0x3B, 0x01, 0x02, 0x05, 0x0C, 0x0C, 0x75, 0x0A, 0x79, 0x0A,
                0x79, 0x02, 0x6E, 0x02, 0x6E, 0x02, 0x6E, 0x0A, 0x0D, 0x0A,
                0x0F, 0x0A, 0x0F, 0x0A, 0x0F,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xC4, 24,
                0x01, 0x02, 0x05, 0x0C, 0x0C, 0x75, 0x0A, 0x79, 0x0A, 0x79,
                0x02, 0x6E, 0x02, 0x6E, 0x02, 0x6E, 0x0A, 0x0D, 0x0A, 0x0F,
                0x0A, 0x0F, 0x0A, 0x0F,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xC5, 23,
                0x03, 0x05, 0x0C, 0x0C, 0x75, 0x0A, 0x79, 0x0A, 0x79, 0x02,
                0x6E, 0x02, 0x6E, 0x02, 0x6E, 0x0A, 0x0D, 0x0A, 0x0F, 0x0A,
                0x0F, 0x0A, 0x0F,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xD7, 17,
                0x00, 0x0A, 0x63, 0x0A, 0x63, 0x0A, 0x63, 0x0A, 0x63, 0x0A,
                0x63, 0x0A, 0x63, 0x0A, 0x63, 0x0A, 0x63,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xCB, 43,
                0x7F, 0x78, 0x71, 0x64, 0x5A, 0x58, 0x4B, 0x51, 0x3A, 0x53,
                0x51, 0x4F, 0x6A, 0x54, 0x57, 0x46, 0x3F, 0x2F, 0x1B, 0x0F,
                0x08, 0x7F, 0x78, 0x71, 0x64, 0x5A, 0x58, 0x4B, 0x51, 0x3A,
                0x53, 0x51, 0x4F, 0x6A, 0x54, 0x57, 0x46, 0x3F, 0x2F, 0x1B,
                0x0F, 0x08, 0x00,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xCE, 23,
                0x00, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C,
                0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C,
                0x0C, 0x0C, 0x0C,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xCF, 45,
                0x00, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
                0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
                0x30, 0x30, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xD0, 29,
                0x00, 0x1F, 0x1F, 0x11, 0x1E, 0x1F, 0x0F, 0x0F, 0x0D, 0x0D,
                0x0B, 0x0B, 0x09, 0x09, 0x07, 0x07, 0x05, 0x05, 0x01, 0x1F,
                0x1F, 0x1F, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xD1, 29,
                0x00, 0x1F, 0x1F, 0x10, 0x1E, 0x1F, 0x0E, 0x0E, 0x0C, 0x0C,
                0x0A, 0x0A, 0x08, 0x08, 0x06, 0x06, 0x04, 0x04, 0x00, 0x1F,
                0x1F, 0x1F, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xD2, 29,
                0x00, 0x5F, 0x1F, 0x10, 0x1F, 0x1E, 0x08, 0x08, 0x4A, 0x0A,
                0x0C, 0x0C, 0x0E, 0x0E, 0x04, 0x04, 0x06, 0x06, 0x00, 0x1F,
                0x1F, 0x1F, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xD3, 29,
                0x00, 0x1F, 0x1F, 0x11, 0x1F, 0x1E, 0x09, 0x09, 0x0B, 0x0B,
                0x0D, 0x0D, 0x0F, 0x0F, 0x05, 0x05, 0x07, 0x07, 0x01, 0x1F,
                0x1F, 0x1F, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xD4, 87,
                0x00, 0x20, 0x0B, 0x00, 0x0D, 0x00, 0x0F, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x03,
                0x00, 0x81, 0x04, 0xAE, 0x04, 0xB0, 0x04, 0xB2, 0x04, 0xB4,
                0x04, 0xB6, 0x04, 0xB8, 0x00, 0x00, 0x00, 0x03, 0x03, 0x03,
                0x03, 0x03, 0x03, 0x00, 0x06, 0x44, 0x06, 0x46, 0x03, 0x03,
                0x00, 0x00, 0x07, 0x00, 0x06, 0x04, 0xA7, 0x04, 0xA8, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40,
                0x00, 0x00, 0x01, 0x00, 0x00, 0x20, 0x00,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xD5, 61,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0,
                0x00, 0x00, 0x00, 0x07, 0x32, 0x5A, 0x00, 0x00, 0x3C, 0x00,
                0x1E, 0x00, 0x1E, 0xB3, 0x00, 0x0F, 0x06, 0x0C, 0x00, 0x71,
                0x20, 0x04, 0x10, 0x04, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x1F, 0xFF, 0x00,
                0x00, 0x00, 0x1F, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
                0xFF,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xCD, 2,
                0x00, 0x00,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_D8), 0xDE, 0x01,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xB9, 4,
                0x00, 0xFF, 0xFF, 0x04,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xC7, 3,
                0x1F, 0x14, 0x0E,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_D8), 0xDE, 0x02,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xE5, 24,
                0x00, 0x60, 0x60, 0x02, 0x18, 0x60, 0x18, 0x60, 0x09, 0x04,
                0x00, 0xC5, 0x01, 0x2C, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x04, 0x00, 0x00, 0x04,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xE6, 3,
                0x10, 0x10, 0x82,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xC4, 7,
                0x00, 0x11, 0x07, 0x00, 0x11, 0x01, 0x08,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xC3, 2,
                0x20, 0xFF,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_D8), 0xBD, 0x1B,
                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xC6, 2,
                0x4A, 0x00,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xCD, 4,
                0x14, 0x64, 0x11, 0x40,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xC1, 10,
                0x00, 0x40, 0x00, 0x02, 0x02, 0x02, 0x02, 0x7F, 0x00, 0x00,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xB3, 2,
                0x00, 0xA8,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xBB, 11,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x41, 0x40, 0x43,
                0x04,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xC2, 10,
                0x02, 0x42, 0x50, 0x00, 0x02, 0xE4, 0x61, 0x73, 0xF9, 0x08,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xEC, 14,
                0x07, 0x07, 0x40, 0x00, 0x22, 0x02, 0x00, 0xFF, 0x08, 0x7C,
                0x00, 0x00, 0x00, 0x00,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_D8), 0xDE, 0x03,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_BYTE_DATA), 0xD1, 5,
                0x00, 0x00, 0x21, 0xFF, 0x00,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8_D8), 0xDE, 0x00,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8), 0x35,

                static_cast<uint8_t>(Init_List_Format::DELAY_MS), 30,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8), 0x11,

                static_cast<uint8_t>(Init_List_Format::DELAY_MS), 120,

                static_cast<uint8_t>(Init_List_Format::WRITE_C8), 0x29,

                static_cast<uint8_t>(Init_List_Format::DELAY_MS), 50};

        int32_t _rst;

    public:
        Hi8561(std::shared_ptr<Bus_Mipi_Guide> bus, int32_t rst = CPP_BUS_DRIVER_DEFAULT_VALUE)
            : Mipi_Guide(bus, Init_List_Format::WRITE_C8_D8), _rst(rst)
        {
        }

        bool begin(int32_t freq_mhz = CPP_BUS_DRIVER_DEFAULT_VALUE, int32_t lane_bit_rate_mbps = CPP_BUS_DRIVER_DEFAULT_VALUE) override;

        /**
         * @brief 设置睡眠
         * @param status [true]：进入睡眠 [false]：退出睡眠
         * @return
         * @Date 2025-07-11 11:52:48
         */
        bool set_sleep(bool status);

        /**
         * @brief 设置屏幕关闭
         * @param status [true]：关闭屏幕 [false]：开启屏幕
         * @return
         * @Date 2025-07-11 11:52:48
         */
        bool set_screen_off(bool status);
    };
};